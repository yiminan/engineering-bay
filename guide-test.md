# 테스트 가이드

## 테스트 세분화 하기

(1) 해피 케이스 (2) 예외 케이스 를 테스트 해야 하고, 경계값 테스트가 필요하다.

### 경계값 테스트란?

범위, 구간, 날짜 등을 기준을 두고 테스트 하는 것

---

## @DisplayName 섬세하게 작성하기

### 명사의 나열보다는 문장으로 작성하자.

ASIS : 음료 1개 추가 테스트  
-> 음료를 1개 추가할 수 있다.(테스트 행위)  
-> TOBE: 음료를 1개 추가하면, 주문 목록에 담긴다.(테스트 행위 + 테스트 결과)

### 도메인 용어를 사용하여 한층 추상화된 내용을 담자.

- 메서드 자체의 관점보다 도메인 정책 관점으로 기술한다.
- 테스트의 현상을 중점으로 기술하지 않아야한다.

ASIS : `특정 시간` 이전에 주문을 생성하면 `실패한다`.  
-> TOBE : `영업 시작 시간` 이전에는 `주문을 생성할 수 없다`.  
(도메인 용어: "영업 시작 시간", 테스트 현상: "실패한다")

## BDD(Behavior Driven Development)

- TDD에서 파생된 개발 방법
- 함수 단위의 테스트에 집중하기보다, 시나리오에 기반한 테스트케이스 자체에 집중하여 테스트한다.
- 개발자가 아닌 사람이 봐도 이해할 수 있을 정도의 추상화 수준(레벨)을 권장한다.

### Given-When-Then

어떤 환경에서(Given),  
어떤 행동을 진행했을 때(When),  
어떤 상태 변화가 일어난다(Then).  
-> DisplayName에 명확하게 작성할 수 있다.

## Spring & JPA 기반 테스트

### 레이어드 아키텍쳐(Layered Architecture)와 테스트

Presentation Layer -> Business Layer -> Persistence Layer (-> Infrastructure Layer)  
각 레이어별로 관심사를 분리해서 테스트를 진행하면 복잡도를 줄일 수 있다.  
-> 테스트를 진행할 때, 테스트 대상이 되는 레이어의 의존성을 최대한 줄이는 것이 좋다.

### 통합 테스트

- 단위 테스트만으로는 단위 테스트가 조합되어서 동작하는 경우 그 경우의 수가 많아져서 결과를 예측하기 힘들다.
- 여러 모듈이 협력하는 기능을 통합적으로 검증하는 테스트
- 일반적으로 작은 범위의 단위 테스트만으로는 기능 전체의 신뢰성을 보장할 수 없다.
- 풍부한 단위 테스트 & 큰 기능 단위를 검증하는 통합 테스트
